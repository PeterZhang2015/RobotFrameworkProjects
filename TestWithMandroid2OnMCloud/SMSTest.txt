*** Settings ***
Library           OperatingSystem
Library           String

*** Variables ***
${jar_file_path}    C:\\Work\\Mandroid2\\MatriumMAndroid2-release.jar    #File location for Mandroid2 jar.
${sender_handset_id}    mcloud.matrium.com.au:7605    #Handset ID for the SMS sending user.
${receiver_handset_id}    mcloud.matrium.com.au:7621    #Handset ID for the SMS receiving user.
${send_sms_code}    3001    #Mandroid2 code to send a SMS.
${read_received_sms_code}    3002    #Mandroid2 code to read SMS.
${send_user_number}    0402537622    #Phone number of the SMS sending user.
${receive_user_number}    0479085367    #Phone number of the SMS receiving user.
${sms_body}       TestforSMSThroughRobotFramework1    #SMS content body.

*** Test Cases ***
BasicSMSl
    connectToSMSSendUser    #Run the defined robotframework keyword to connect to the SMS sending user on mCloud.
    connectToSMSReceiveUser    #Run the defined robotframework keyword to connect to the SMS receiving user on mCloud.
    sendBasicSMS    #Run the defined robotframework keyword to send a basic SMS.
    Sleep    5    #Set duration for the SMS transmission.
    receiveAndReadSMS    #Run the defined robotframework keyword to read the received SMS.
    disconnectUsers    #Run the defined robotframework keyword to disconnect all users.

*** Keywords ***
connectToSMSSendUser
    ${response}=    Run    adb connect ${sender_handset_id}    #Connect to the caller user on mCloud.

connectToSMSReceiveUser
    ${response}=    Run    adb connect ${receiver_handset_id}    #Connect to the called user on mCloud.

sendBasicSMS
    ${response}=    Run    java -jar ${jar_file_path} ${sender_handset_id} ${send_sms_code} sms_address ${receive_user_number} sms_body ${sms_body}    #Run Mandroid2 command to send a SMS.

receiveAndReadSMS
    ${response}=    Run    java -jar ${jar_file_path} ${receiver_handset_id} ${read_received_sms_code}    #Run Mandroid2 command to read the latest received SMS.

disconnectUsers
    ${response}=    Run    adb disconnect    #Disconnect all users.
